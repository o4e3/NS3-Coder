{
  "repo_name": "inet-tub/ns3-datacenter",
  "github_url": "https://github.com/inet-tub/ns3-datacenter",
  "readme": "\n# ns3-datacenter\n\nThis repository contains the source code used for the following papers: \n- [PowerTCP (NSDI 2022)](https://www.usenix.org/conference/nsdi22/presentation/addanki)\n- [ABM (SIGCOMM 2022)](https://dl.acm.org/doi/10.1145/3544216.3544252)\n- [Reverie (NSDI 2024)](https://www.usenix.org/conference/nsdi24)\n- [Credence (NSDI 2024)](https://www.usenix.org/conference/nsdi24)\n\n**V1.0 Release**\n\nWe extend ns-3.39 to support some of the recent advancements in the datacenter context.\n- Various datacenter congestion control algorithms including PowerTCP over both TCP/IP and RDMA stacks can be used simulataneously. \n- The switch MMU is based on SONIC buffer model (purely based on our understanding only). The switch MMU can also be configured based on Reverie model. \n- Support for several Buffer Management algorithms including ABM, Reverie and Credence.\n- Integration with pybind11 enables interesting applications such as obtaining predictions from a scikit-learn trained model (see Credence examples).\n\nPrevious versions of the repository can be found here: [Releases](https://github.com/inet-tub/ns3-datacenter/releases/)\n\nMany additions to the source code are based on prior work: [ns3-rdma](https://github.com/bobzhuyb/ns3-rdma) and [HPCC](https://github.com/alibaba-edu/High-Precision-Congestion-Control). Please consider citing the following papers if you use this repository in your research.\n\n```bib\n@inproceedings{nsdi22,\n  author = {Addanki, Vamsi and Michel, Oliver and Schmid, Stefan},\n  title = {{PowerTCP}: Pushing the Performance Limits of Datacenter Networks},\n  booktitle = {19th USENIX Symposium on Networked Systems Design and Implementation (NSDI 22)},\n  year = {2022},\n  month = {April},\n  address = {Renton, WA},\n  url = {https://www.usenix.org/conference/nsdi22/presentation/addanki},\n  publisher = {USENIX Association},\n}\n\n@inproceedings{abm,\n  author = {Addanki, Vamsi and Apostolaki, Maria and Ghobadi, Manya and Schmid, Stefan and Vanbever, Laurent},\n  title = {ABM: Active Buffer Management in Datacenters},\n  year = {2022},\n  month = {August},\n  booktitle = {Proceedings of the ACM SIGCOMM 2022 Conference},\n  address = {Amsterdam, Netherlands}\n}\n\n@inproceedings{reverie,\n  author = {Addanki, Vamsi and Bai, Wei and Schmid, Stefan and Apostolaki, Maria},\n  title = {Reverie: Low Pass Filter-Based Switch Buffer Sharing for Datacenters with RDMA and TCP Traffic},\n  year = {2024},\n  month = {April},\n  booktitle = {21th USENIX Symposium on Networked Systems Design and Implementation (NSDI 24)},\n  address = {Santa Clara, CA},\n  publisher = {USENIX Association}\n}\n\n@inproceedings{credence,\n  author = {Addanki, Vamsi and Pacut, Maciej and Schmid, Stefan},\n  title = {Credence: Augmenting Datacenter Switch Buffer Sharing with ML Predictions},\n  year = {2024},\n  month = {April},\n  booktitle = {21th USENIX Symposium on Networked Systems Design and Implementation (NSDI 24)},\n  address = {Santa Clara, CA},\n  publisher = {USENIX Association}\n}\n\n\n```\n\n# Configure and Build\n\nIn the following, `$REPO` = path to the root directory of this repository. Change $REPO accordingly.\n\n**Configure ns3:**\n\n```bash\ncd $REPO/simulator/ns-3.39/\n./configure.sh\n```\n**Build:**\n\n```bash\ncd $REPO/simulator/ns-3.39/\n./waf\n```\n\n# Running PowerTCP\n\nCheckout [`simulator/ns-3.39/examples/PowerTCP`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/examples/PowerTCP) for various simulation files and scripts to run PowerTCP. \n\n# Running ABM\n\nCheckout [`simulator/ns-3.39/examples/ABM`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/examples/ABM) for simulation files and scripts to run ABM and other buffer management algorithms. **Note:** This only runs in the TCP/IP stack and this is what we used in the paper. Checkout [`switch MMU`](simulator/ns-3.39/src/point-to-point/model/switch-mmu.cc) for a more general implementation of ABM suited for both RDMA stack and mixed stacks (RDMA + TCP/IP sharing the buffer).\n\n# Running Credence\nCheckout [`simulator/ns-3.39/examples/Credence`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/examples/Credence). Sanitized code and documentation will be updated soon...\n\n# Running Reverie\nCheckout [`simulator/ns-3.39/examples/Reverie`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/examples/Reverie). Sanitized code and documentation will be updated by soon...\n\n# Important Files\n\n[`simulator/ns-3.39/src/point-to-point/model/qbb-net-device.cc`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/src/point-to-point/model/qbb-net-device.cc): This file is modified such that it can send and receive both RDMA and TCP/IP traffic. Note: only bulk-send-application and packet-sink should be used for TCP/IP traffic for correctness. Some examples on how to launch RDMA traffic can be found in [`simulator/ns-3.39/examples/PowerTCP`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/examples/PowerTCP) folder.\n\n[`simulator/ns-3.39/src/point-to-point/model/rdma-hw.cc`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/src/point-to-point/model/rdma-hw.cc): This file contains the core logic of PowerTCP and Theta-PowerTCP. The entire file is almost same as the one in HPCC simulator.\n\n[`simulator/ns-3.39/src/point-to-point/model/switch-node.cc`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/src/point-to-point/model/switch-node.cc): This file is also modified to support both RDMA and TCP/IP traffic. Minor change in INT, for PowerTCP, RXBytes is appended instead of TxBytes. This is since $\\lambda(t)=\\mu(t)+\\dot{q}(t) $ i.e., RxRate is TxRate + Queue gradient where $\\lambda(t)$ is required for PowerTCP to calculate power.\n\n[`simulator/ns-3.39/src/point-to-point/model/switch-mmu.cc`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/src/point-to-point/model/switch-mmu.cc): This file has the core logic for buffer management. Currently, we only support Dynamic Thresholds (DT) and Active Buffer Management (ABM). Note: The SIGCOMM version of ABM paper uses the implementation in traffic control layer (see below).\n\n[`simulator/ns-3.39/src/traffic-control/model/gen-queue-disc.cc`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/src/traffic-control/model/gen-queue-disc.cc): This file contains various buffer management algorithms at the traffic-control layer. It can only be used in the TCP/IP stack. Note: This is what we used for ABM in the paper.\n\n[`simulator/ns-3.39/src/internet/model/tcp-advanced.cc`](https://github.com/inet-tub/ns3-datacenter/tree/master/simulator/ns-3.39/src/internet/model/tcp-advanced.cc): This file contains various datacenter congestion control algorithms including PowerTCP implemented in the TCP/IP stack. This is what we used for ABM in the paper.\n\n# Changes to NS-3.39\n\n```diff\n  Makefile (gone)                                    |    0\n README.md                                          |  178 +-\n config.sh (gone)                                   |   15 -\n simulator/ns-3.39/examples/ABM/README.md (new)     |    1 +\n .../examples/ABM/abm-evaluation-burst.cc (new)     |  874 ++++++++\n .../examples/ABM/abm-evaluation-multi.cc (new)     |  848 ++++++++\n .../examples/ABM/abm-evaluation-unimulti.cc (new)  |  905 ++++++++\n .../ns-3.39/examples/ABM/abm-evaluation.cc (new)   |  944 +++++++++\n simulator/ns-3.39/examples/ABM/alphas (new)        |    8 +\n simulator/ns-3.39/examples/ABM/cdf.c (new)         |  144 ++\n simulator/ns-3.39/examples/ABM/cdf.h (new)         |   43 +\n .../ns-3.39/examples/ABM/parseData-multiQ.py (new) |  101 +\n .../examples/ABM/parseData-singleQ.py (new)        |  125 ++\n simulator/ns-3.39/examples/ABM/results.sh (new +x) |  160 ++\n .../examples/ABM/run-buffer-loveland.sh (new +x)   |   91 +\n .../examples/ABM/run-interval-loveland.sh (new +x) |   99 +\n .../ABM/run-multiqueues-lakewood.sh (new +x)       |  137 ++\n .../examples/ABM/run-single-lakewood.sh (new +x)   |  164 ++\n .../examples/ABM/run-single-loveland.sh (new +x)   |  165 ++\n simulator/ns-3.39/examples/ABM/websearch.txt (new) |   16 +\n simulator/ns-3.39/examples/ABM/wscript (new)       |   15 +\n .../ns-3.39/examples/PowerTCP/README.md (new)      |   34 +\n .../examples/PowerTCP/buildsimple.sh (new +x)      |    5 +\n simulator/ns-3.39/examples/PowerTCP/cdf.c (new)    |  144 ++\n simulator/ns-3.39/examples/PowerTCP/cdf.h (new)    |   43 +\n .../examples/PowerTCP/config-burst.txt (new)       |   58 +\n .../examples/PowerTCP/config-fairness.txt (new)    |   58 +\n .../examples/PowerTCP/config-workload.txt (new)    |   58 +\n .../ns-3.39/examples/PowerTCP/config.sh (new)      |    1 +\n .../ns-3.39/examples/PowerTCP/config.txt (new)     |   58 +\n simulator/ns-3.39/examples/PowerTCP/fct.py (new)   |  493 +++++\n .../examples/PowerTCP/flow-burstExp.txt (new)      |   12 +\n .../examples/PowerTCP/flow-fairnessExp.txt (new)   |    5 +\n simulator/ns-3.39/examples/PowerTCP/flow.txt (new) |  211 ++\n .../examples/PowerTCP/generate_longflows.py (new)  |   20 +\n .../examples/PowerTCP/generate_topology.py (new)   |   55 +\n .../examples/PowerTCP/old-plots-all.py (new +x)    | 1054 ++++++++++\n .../ns-3.39/examples/PowerTCP/plot-burst.py (new)  |  112 +\n .../examples/PowerTCP/plot-fairness.py (new)       |   88 +\n .../examples/PowerTCP/plot-workload.py (new)       |  589 ++++++\n .../PowerTCP/powertcp-evaluation-burst.cc (new)    | 1109 ++++++++++\n .../PowerTCP/powertcp-evaluation-fairness.cc (new) | 1088 ++++++++++\n .../PowerTCP/powertcp-evaluation-workload.cc (new) | 1356 ++++++++++++\n .../examples/PowerTCP/results-burst.sh (new +x)    |   44 +\n .../examples/PowerTCP/results-fairness.sh (new +x) |   48 +\n .../examples/PowerTCP/results-workload.sh (new +x) |  112 +\n .../examples/PowerTCP/script-burst.sh (new +x)     |   92 +\n .../examples/PowerTCP/script-fairness.sh (new +x)  |   75 +\n .../examples/PowerTCP/script-workload.sh (new +x)  |  202 ++\n .../ns-3.39/examples/PowerTCP/set_cc.sh (new +x)   |    6 +\n .../ns-3.39/examples/PowerTCP/topology.txt (new)   |  146 ++\n .../ns-3.39/examples/PowerTCP/websearch.txt (new)  |   16 +\n simulator/ns-3.39/examples/PowerTCP/wscript (new)  |   12 +\n simulator/ns-3.39/examples/tcp/dctcp-example.cc    |    2 +\n .../helper/rdma-client-helper.cc (new)             |   65 +\n .../applications/helper/rdma-client-helper.h (new) |   79 +\n .../applications/model/bulk-send-application.cc    |   75 +-\n .../src/applications/model/bulk-send-application.h |   14 +\n .../ns-3.39/src/applications/model/packet-sink.cc  |   48 +\n .../ns-3.39/src/applications/model/packet-sink.h   |   12 +\n .../src/applications/model/rdma-client.cc (new)    |  157 ++\n .../src/applications/model/rdma-client.h (new)     |   87 +\n .../ns-3.39/src/applications/model/udp-client.cc   |    2 +-\n .../ns-3.39/src/applications/model/udp-server.cc   |    2 +-\n .../src/applications/model/udp-trace-client.cc     |    2 +-\n simulator/ns-3.39/src/applications/wscript         |   12 +-\n .../src/core/model/random-variable.cc (new)        | 2157 ++++++++++++++++++++\n .../ns-3.39/src/core/model/random-variable.h (new) |  755 +++++++\n simulator/ns-3.39/src/core/wscript                 |    2 +\n .../src/internet/model/ipv4-global-routing.cc      |  198 +-\n .../src/internet/model/ipv4-global-routing.h       |    5 +\n .../ns-3.39/src/internet/model/ipv4-l3-protocol.cc |    1 +\n simulator/ns-3.39/src/internet/model/rdma.h (new)  |    6 +\n .../src/internet/model/tcp-advanced.cc (new)       |  607 ++++++\n .../src/internet/model/tcp-advanced.h (new)        |  161 ++\n .../src/internet/model/tcp-congestion-ops.h        |   28 +\n .../ns-3.39/src/internet/model/tcp-l4-protocol.cc  |    3 +-\n .../ns-3.39/src/internet/model/tcp-socket-base.cc  |  169 +-\n .../ns-3.39/src/internet/model/tcp-socket-base.h   |   13 +\n .../ns-3.39/src/internet/model/tcp-socket-state.cc |   26 +\n .../ns-3.39/src/internet/model/tcp-socket-state.h  |   30 +\n simulator/ns-3.39/src/internet/wscript             |    3 +\n simulator/ns-3.39/src/network/model/buffer.cc      |    6 +\n simulator/ns-3.39/src/network/model/buffer.h       |    4 +\n simulator/ns-3.39/src/network/model/net-device.cc  |    9 +\n simulator/ns-3.39/src/network/model/net-device.h   |    6 +\n simulator/ns-3.39/src/network/model/node.cc        |   25 +-\n simulator/ns-3.39/src/network/model/node.h         |   25 +-\n simulator/ns-3.39/src/network/model/packet.cc      |    6 +\n simulator/ns-3.39/src/network/model/packet.h       |    5 +-\n .../network/utils/broadcom-egress-queue.cc (new)   |  262 +++\n .../network/utils/broadcom-egress-queue.h (new)    |   81 +\n .../src/network/utils/custom-header.cc (new)       |  344 ++++\n .../src/network/utils/custom-header.h (new)        |  146 ++\n .../src/network/utils/custom-priority-tag.cc (new) |   61 +\n .../src/network/utils/custom-priority-tag.h (new)  |   54 +\n simulator/ns-3.39/src/network/utils/data-rate.cc   |   51 +-\n simulator/ns-3.39/src/network/utils/data-rate.h    |   34 +-\n .../src/network/utils/feedback-tag.cc (new)        |   86 +\n .../ns-3.39/src/network/utils/feedback-tag.h (new) |   67 +\n .../ns-3.39/src/network/utils/int-header.cc (new)  |   94 +\n .../ns-3.39/src/network/utils/int-header.h (new)   |  119 ++\n .../src/network/utils/interface-tag.cc (new)       |  105 +\n .../src/network/utils/interface-tag.h (new)        |   47 +\n .../ns-3.39/src/network/utils/rdma-tag.cc (new)    |   62 +\n .../ns-3.39/src/network/utils/rdma-tag.h (new)     |   49 +\n .../model => network/utils}/seq-ts-header.cc       |   51 +-\n .../model => network/utils}/seq-ts-header.h        |   38 +-\n .../ns-3.39/src/network/utils/unsched-tag.cc (new) |   62 +\n .../ns-3.39/src/network/utils/unsched-tag.h (new)  |   49 +\n simulator/ns-3.39/src/network/wscript              |   18 +\n .../src/point-to-point/helper/qbb-helper.cc (new)  |  453 ++++\n .../src/point-to-point/helper/qbb-helper.h (new)   |  202 ++\n .../src/point-to-point/helper/sim-setting.h (new)  |   53 +\n .../src/point-to-point/model/cn-header.cc (new)    |  177 ++\n .../src/point-to-point/model/cn-header.h (new)     |  102 +\n .../src/point-to-point/model/pause-header.cc (new) |  114 ++\n .../src/point-to-point/model/pause-header.h (new)  |   77 +\n .../ns-3.39/src/point-to-point/model/pint.cc (new) |   44 +\n .../ns-3.39/src/point-to-point/model/pint.h (new)  |   19 +\n .../model/point-to-point-net-device.cc             |    5 +\n .../model/point-to-point-net-device.h              |    8 +-\n .../ns-3.39/src/point-to-point/model/ppp-header.cc |    5 +-\n .../ns-3.39/src/point-to-point/model/ppp-header.h  |   20 +-\n .../src/point-to-point/model/qbb-channel.cc (new) \n\n```\n",
  "examples": []
}