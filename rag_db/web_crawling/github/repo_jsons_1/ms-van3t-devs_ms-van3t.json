{
  "repo_name": "ms-van3t-devs/ms-van3t",
  "github_url": "https://github.com/ms-van3t-devs/ms-van3t",
  "readme": "# ms-van3t\n\n![](img/MS-VAN3T_logo-V2_small.png)\n\n[<img src=\"img/docs.png\" height=\"40\">](https://ms-van3ts-documentation.readthedocs.io/en/master/)\n\n----- _ms-van3t is pronounced \"em-es vanet\"_\n\nns-3 modules to build and simulate ETSI-compliant VANET (V2X) applications using SUMO (v-1.6.0+) and ns-3 (ns-3-dev, version supporting the NR-V2X module by CTTC), with the possibility of easily switching stack and communication technology.\n\nIt has been tested with SUMO v1.6.0, v1.7.0, v1.8.0, v1.12.0, v1.18.0 on Ubuntu 20.04 and 22.04.\nBack compatibility **is not** ensured with new versions of TraCI.\n\nTo build the project:\n* Install SUMO following the guide at [https://sumo.dlr.de/wiki/Downloads](https://sumo.dlr.de/wiki/Downloads)\n    * You can use \n    \n    \t`sudo add-apt-repository ppa:sumo/stable`  \n    \t`sudo apt update`  \n    \t`sudo apt install sumo sumo-tools sumo-doc`  \n    * Be careful: in the future the previous commands will install updated version of SUMO which are not ensured to work with this scripts (that are tested with any version from **v-1.6.0** to **v-1.18.0** )\n    * Test sumo by opening a terminal and running \"sumo-gui\".\n\t\n    * **Possible problems**:\n\t\t\t\n\t\t\tYou may get the following error when running SUMO:\n\t\t\t\n        \t\"sumo-gui: symbol lookup error: /usr/lib/libgdal.so.26: undefined symbol: GEOSMakeValid_r\"\n    \n        \tTo solve it, remove all the reference to GEOS inside /usr/local/lib/ (do NOT do it if you need the GEOS library):\n    \n        \t\"sudo rm /usr/local/lib/libgeos*\"\n\n* Clone this repository in your pc:\n\n`git clone https://github.com/ms-van3t-devs/ms-van3t.git`\n\n* Run, from this repository either:\n\n`./sandbox_builder.sh install-dependencies` -> if this is the first time you install ns-3 or ms-van3t on your system\n\nor\n\n`./sandbox_builder.sh` -> if this is **not** the first time you install ns-3 \n\nThis script will download the proper version of ns-3-dev and install this framework. The folder `ns-3-dev` will remain linked to this GitHub repository (not to the vanilla ns-3-dev one), allowing you to more easily develop updates and possibile contributions to *ms-van3t*.\n    \n* Configure `ns3` to build the framework with `<ns3-folder>./ns3 configure --build-profile=optimized --enable-examples --enable-tests --disable-python (add here what you want to enable)\"` - The usage of the optimized profile allows to speed up the simulation time. This command should be launched from inside the `ns-3-dev` folder.\n\n* **Important**: If you are compiling ms-van3t on Ubuntu 22.04 LTS or later, you need to specify, when calling `./ns3 configure`, also the `--disable-werror` flag\n\n* Build ns3:\n`./ns3 build`\n\n**Important**\n\n`src/automotive/` contains all the application related files and all the source code implementing the ETSI ITS-G5 stack for vehicular communications. Inside `sumo_files_v2v_map` you can find the SUMO map and trace for the V2V sample application, while inside `sumo_files_v2i_map` you can find the SUMO map and trace for the V2I sample application. Similarly you can find the SUMO map and trace for the Traffic Manager sample application inside `sumo_files_v2i_TM_map` and the ones for the Emergency Vehicle Warning inside `sumo_files_v2i_EVW_map`\n\n`src/traci/` and `src/traci-applications/` contain instead all the logic to link ns-3 and SUMO. \n\n`src/cv2x/` contains the model for C-V2X in transmission mode 4.\n\n`src/sionna/` contains the integration files for the NVIDIA-SIONNA Ray Tracing module.\n\nThe user is also encouraged to use the `sumo_files_v2v_map` and `sumo_files_v2i_map` folders to save there the SUMO-related files for his/her own applications.\n\n**The version of CAM and DENM messages (v1 or v2)** can be easily switched by relying on the `switch_ETSI_version.sh` script. This script relies on the `ns-3-dev/src/automotive/model/ASN1/currmode.txt` file. Please **never** modify it manually or delete it!\n\n# ms-van3t-CARLA extension\n\nIn addition to SUMO and GPS traces ms-van3t supports the use of CARLA for mobility and sensor perception simulation. This extension leverages the [OpenCDA framework](https://github.com/ucla-mobility/OpenCDA) to develop an LDM module and extend the gRPC adapter devised [here](https://github.com/veins/veins_carla) to be able to extract not only localization information from CARLA but also perception information from the LDM module. The developed client module on ns-3 queries the information to use it for the mobility of each of the ns-3 simulated nodes and to update the LDM module with all perception data sent over the simulated vehicular network. \n\n**System requirements**\n\nWe highly recommend running ms-van3t-CARLA on Ubuntu 20.04 (used for developing the framework) or Ubuntu 18.04, Ubuntu 22.04 is not officially supported by CARLA. If both CARLA and OpenCDA need to be installed we recommend at least 35GB of free space on your system. For smooth execution of simulation (especially if AI/ML models are leveraged for the perception simulation) we recommend using a GPU with at least 8GB of memory.\nThe version of CARLA supported by ms-van3t-CARLA is CARLA 0.9.12.\n\n**Installing ms-van3t-CARLA**\n\nTo be able to use ms-van3t-CARLA, CARLA and OpenCDA need to be installed. After following the steps detailed above to build the project, from inside the `ns-3-dev` folder execute the `switch_ms-van3t-CARLA.sh` script to install all necessary dependencies. \nThe script will try to find the path of your CARLA and OpenCDA installation to be defined in the `CARLA-OpenCDA.conf` file. If the user already has an installation of either CARLA or OpenCDA they should specify the path to the installation together with the path to their Python environment in the following way: \n\n`CARLA_HOME=/path/to/CARLA_0.9.12`\n\n`OpenCDA_HOME=/path/to/OpenCDA`\n\n`Python_Interpreter=/path/to/anaconda3/envs/msvan3t_carla/bin/python3` if using conda or `Python_Interpreter=python3.7` otherwise.\n\nIn case this is the first time using either CARLA or OpenCDA the script will install them prompting for confirmation in each case. It is highly recommended to install OpenCDA with conda.\nOnce the script finishes its execution the user should build the project again with `./ns3 build`.\n\n**ms-van3t-CARLA examples**\n\nTwo examples leveraging CARLA are provided, showcasing how to use the extension with both IEEE 802.11p and NR-V2X as access technologies.\nTo run the provided examples: \n\n`./ns3 run \"v2v-carla-80211p\"` or  `./ns3 run \"v2v-carla-nrv2x\"` \n\n For further description of the modules provided in this extension please refer to our paper [here](https://www.eurecom.fr/publication/7556/download/comsys-publi-7556.pdf).\n\n# ms-van3t NVIDIA-Sionna extension\n\nTo integrate `NVIDIA Sionna` with the `ms-van3t` framework, you need to install the Python library for Sionna.\n\nThis can be done locally or on a remote server using the following command:\n\n```sh\n  pip install sionna\n```\n\nThe supported and tested versions of `Sionna` are v0.19.0 and v1.0.\n\nOnce SIONNA is installed, you need first to configure the ray tracer simulation through `sionna_server_script.py` or `sionna_v1_server_script.py` scripts.\nThe main difference between these two scripts is that the `sionna_server_script.py` simulates a simpler ray tracer simulation, without taking into account the vehicles speed and so the Doppler Effect.\nOn the other hand, `sionna_v1_server_script.py` integrates a more complete and rigorous simulation.\n\nThe arguments of both the two Python scripts are:\n- `--file_name`, a string to identify the path of your Sionna scenario file. \n- `--local_machine`, include this argument if you want Sionna to run on the local machine. If not provided, the script will interpret that Sionna is running on a remote server.\n- `--verbose`, include this argument if you want to print Sionna logs to the console.\n\nThe `sionna_server_script.py`/`sionna_v1_server_script.py` script automatically identifies the presence of a GPU and configures TensorFlow accordingly. It also sets up a UDP socket to communicate with the `ms-van3t` framework, handling various types of messages such as location (and speed in the v1 script) updates, path loss requests, delay requests, and line-of-sight (LOS) checks.\n\nExample usage:\n\n```sh\n  python3 sionna_v1_server_script.py --file_name src/sionna/scenarios/SionnaCircleScenario/scene.xml --local-machine --verbose\n```\n\nIf you are running Sionna on a remote server, you need to specify the IP address of the SIONNA server in your simulation file inside ms-van3t.\n\nFor instance, the `src/automotive/examples/v2v-cam-exchange-sionna-80211p.cc` simulation contains an example of how to configure the communication between ms-van3t and Sionna on the ms-van3t's side.\nRefer to this example to configure the IP address for a remote SIONNA server in your simulation file.\n\nBy following these steps, you can successfully integrate `Sionna` with `ms-van3t` framework and run simulations that leverage Sionna's ray tracing capabilities.\n\n# ms-van3t co-channel coexistence extension\n\n`ms-van3t` offers a special module to simulate the coexistence between different CAVS communication technologies.\nCurrently, the simulator can integrate scenarios where vehicles use either the `IEEE 802.11p` or `NR-V2X` communication stacks, even when their channels overlap.\n\nThe interference management is done by a special module called `TxTracker`.\n\nTo enable this specific feature of the simulator, it is important to **follow these steps precisely**:\n1. Run the `./switch_ms-van3t-interference.sh` script with the `on` argument to configure the environment for interference simulation:\n   ```sh\n    ./switch_ms-van3t-interference.sh on\n   ```\n\n2. **Build just your example** rather than building all examples as in the classical simulator usage:\n   ```sh\n    ./ns3 build <your-example>\n    # Example:\n    ./ns3 build \"v2v-coexistence-80211p-nrv2x\"\n   ```\n\n3. Then run your example with:\n    ```sh\n    ./ns3 run <your-example>\n    # Example:\n    ./ns3 run \"v2v-coexistence-80211p-nrv2x\"\n   ```\n   \n4. To come back to the **normal mode** of `ms-van3t`, run the `./switch_ms-van3t-interference.sh` script again but with the `off` argument:\n   ```sh\n    ./switch_ms-van3t-interference.sh off\n   ```\n   \n5. This will allow you to build and run all files as in the classical simulator usage:\n    ```sh\n    # Example\n    ./ns3 build\n    ./ns3 run \"v2v-simple-cam-exchange-80211p\"\n    ```\n\nFor more details on how to manage the co-channel coexistence simulations, such as how to pass the necessaries parameters to the `TxTracker` module, you can refer to the example `src/automotive/examples/v2v-cam-exchange-coexistence-80211p-nrv2x.cc`.\n\n# Working with an IDE\n\nAlthough not necessarily required, you can also configure an IDE in order to more comfortably work with ms-van3t.\nThe suggested IDEs, which has also been used for the development of ms-van3t, are _QtCreator_ and _CLion_.\n\n## QtCreator\n\nYou can find all the instructions for setting up QtCreator with ns-3 (and the same applies to ms-van3t, as it is based on ns-3) on the [official ns-3 Wiki](https://www.nsnam.org/wiki/HOWTO_configure_QtCreator_with_ns-3).\n\nQtCreator can be installed on Debian/Ubuntu with:\n`sudo apt install qtcreator`\n\nYou need also to install the `libclang-common-8-dev` package (the command for Debian/Ubuntu is reported below):\n`sudo apt install libclang-common-8-dev`\n\nNot installing `libclang-common-8-dev` may result in QtCreator wrongly highlighting several errors and not recognizing some types, when opening any source or header file, even if the code compiles correctly.\n\n**Important**: if `libclang-common-8-dev` is not available, you can try installing a newer version. For example, on Ubuntu 22, we verified that `libclang-common-15-dev` works well too.\n\n## CLion\n\nCLion can be easily installed with the [JetBrains Toolbox App](https://www.jetbrains.com/toolbox-app/).\n\nYou can find all the instructions for setting up CLion with ns-3 (and the same applies to ms-van3t, as it is based on ns-3) on our [documentation](https://ms-van3ts-documentation.readthedocs.io/en/master/IDE.html#clion).\n\n# Supported ETSI C-ITS messages\n\n*ms-van3t* currently supports the following ETSI C-ITS messages:\n- CAM\n- DENM\n- IVIM\n- CPM\n- VAM\n\nFor the transmission and reception of IVIMs (from an RSU to vehicles), you can refer to the `v2i-emergencyVehicleWarning-80211p` example.\n\n\n# Sample V2I example and V2I/V2N applications\n\n*ms-van3t* currently supports two stacks/communication technologies for V2I/V2N:\n- 802.11p, communicating, for instance, with a Road Side Unit (sample program name: `v2i-areaSpeedAdvisor-80211p`)\n- LTE, for V2N communications (sample program name: `v2i-areaSpeedAdvisor-lte`)\n\nTo run the sample V2I program you can use:\n`./ns3 run \"v2i-areaSpeedAdvisor-lte\"` or\n`./ns3 run \"v2i-areaSpeedAdvisor-80211p\"`\n\n*  Nodes are created in the ns3 simulation as vehicles enter the SUMO simulation\n*  A full LTE or 802.11p stack is implemented at lower layers (depending on which example is run)\n\nIn this example, every vehicle that enters the scenario will start sending CAMs with a frequency between *1 Hz* and *10 Hz* (according to the ETSI standards). \n\nThen, the logic of the two sample applications for V2I/V2N is similar, but it differs slightly depending on whether 802.11p is used (V2I) or LTE is used (V2N).  \n\nAt a glance, in 802.11p vehicles broadcast periodic CAM messages and an RSU periodically broadcasts DENM messages to inform vehicles travelling in a low speed area to slow down. In this case CAMs and DENMs messages are encapsulated inside BTP and GeoNetworking.\nIn LTE, instead, the CAM messages are forwarded to a remote host (behind an eNB + EPC), which analyzes the position of the vehicles and sends unicast DENMs to vehicles entering a low speed area to change their maximum allowed speed. In this case, due to the absence of a MBMS module in the LTE framework of ns-3, all the messages are sent in unicast. \nCAM and DENM messages are encapsulated inside BTP, GeoNetworking, UDP and IP.\n\n__802.11p application logic__\n\nThe map is divided into two areas: a circular area in the middle of the map, with a radius of 90 m, on which DENMs are broadcasted by the RSU (with their GeoArea set accordingly), where the maximum speed is 25km/h and an outer area, where the speed limit is set to 75km/h.\n\nThe RSU disseminates a DENM every second in the area mentioned before, and continues its transmissions until it receives CAMs from vehicles in the map. When no CAMs are received for more than 5 seconds, the DENM dissemination in paused, until new vehicles enter the scenario and new CAMs are received by the RSU.\n\n![](img/v2i-80211p.png)\n\n__LTE application logic__\n\nThe map is divided into two areas: the area in the middle, where the maximum speed is 25km/h and an outer area, where the speed limit is set to 75km/h. In this case, DENMs cannot be transmitted using merely BTP and GeoNetworking, but they have to rely on UDP and IPv4, since the server is located in a remote host behind the eNB and EPC. The server checks whenever a transition between the two areas is performed by a vehicle, and, when it happens, it sends it a _unicast_ DENM message to tell it to slow-down (or to let it speed-up again).\n\n![](img/v2i-lte.png)\n\n__Mobility Traces and Facilities Layer__\n\nThe mobility trace is contained in the file `ns-3-dev/src/automotive/example/sumo_files_v2i_map/cars.rou.xml`.\nThis SUMO map embeds some re-routers allowing the vehicles to continuously move in the map.\n\nThe CAMs and DENMs dissemination logics are in the modules inside the `automotive/Facilities` folder while the application logic resides on (areaSpeedAdvisorClient80211p.cc/.h, areaSpeedAdvisorClientLTE.cc/.h) and (areaSpeedAdvisorServer80211p.cc/.h, areaSpeedAdvisorServerLTE.cc/.h) inside `automotive/Applications`.\n\nThe user *IS NOT* expected to modify the code inside the \"Facilities\", \"BTP\" and \"GeoNet\" folders, but rather to use the ETSI Facilities Layer methods inside the application.\n\n**Important**\n\nIf using the LTE version in this very simple toy case, it is possible to connect at most 23 UEs to the enB (due to the LENA framework currently implemented features). You can avoid this problem by using the option `--ns3::LteEnbRrc::SrsPeriodicity=[value]\"` where [value]=0, 2, 5, 10, 20, 40, 80, 160, 320. In this way you can add more UEs. Example: `./waf --run \"v2i-areaSpeedAdvisory-lte --ns3::LteEnbRrc::SrsPeriodicity=160\"`\n\n**List of the most important options:**\n* `--realtime                  [bool] decide to run the simulation using the realtime scheduler or not`\n* `--sim-time                  [double] simulation time`\n* `--sumo-gui                  [bool] decide to show sumo-gui or not`\n* `--server-aggregate-output   [bool] if true, the server will print every second a report on the number of DENM sent and CAM received correctly`\n* `--sumo-updates              [double] frequency of SUMO updates`\n* `--csv-log                   [string] prefix of the CSV log files where to save the disaggregated data coming from the CAMs received by the server and the DENMs received by the vehicles (the user can then use this sample application to build more complex logging mechanisms and/or log additional data coming from the server and/or the vehicles)`\n\n\n\n# Sample V2V example and V2V applications\n\n*ms-van3t* currently supports three stacks/communication technologies for V2V:\n- 802.11p (sample program name: `v2v-emergencyVehicleAlert-80211p`)\n- LTE-V2X Mode 4 (sample program name: `v2v-emergencyVehicleAlert-cv2x`)\n- NR-V2X Mode 2 (sample program name: `v2v-emergencyVehicleAlert-nrv2x`))\n\nTo run the program:\n\n`./ns3 run \"v2v-emergencyVehicleAlert-cv2x\"` or\n`./ns3 run \"v2v-emergencyVehicleAlert-80211p\"` or\n`./ns3 run \"v2v-emergencyVehicleAlert-nrv2x\"`\n\n*  Nodes are created in the ns3 simulation as vehicle enters the SUMO simulation\n*  A full NR-V2X, LTE-V2X or 802.11p stack is implemented at lower layers\n\nIn this example, every vehicle that enters the scenario will start sending CAMs with a frequency between *1 Hz* and *10 Hz* (according to the ETSI standards). The vehicles are divided into \"passenger\" vehicles (i.e., normal vehicles) and \"emergency\" vehicles. \n\nA CAM generated by an emergency vehicle will have the \"StationType\" Data Element (i.e. a field of the message) set to \"specialVehicles\".\nWhen normal vehicles receive these CAM messages from an emergency vehicle, they will check whether their heading is similar to the one of the emergency vehicle and which is their distance to the latter.\n\nIf the heading is similar and the distance is small enough, it means that the emergency vehicle is approaching. In this case, the receiving vehicles will either slow down (if on a different lane than the one the emergency vehicle is travelling on) or change lane as soon as possible (speeding up for a little while, if necessary, when they are on the same lane as the emergency vehicle).\n\nWhen acting, in the SUMO GUI, vehicles will either turn orange (different lane --> slow down) or green (same lane --> clear path as soon as possible).\n\nThe CAMs and DENMs dissemination logic are in the modules inside the `automotive/Facilities` folder while the application logic is inside emergencyVehicleAlert.cc/.h (in `automotive/Applications`).\nThe user *IS NOT* expected to modify the code inside the \"Facilities\", \"BTP\" or \"GeoNet\" folders, but rather to use the ETSI Facilities Layer methods inside the application.\n\nThe SUMO scenario comprehends a ring-like topology, with two directions and two lanes for each direction (with a total of 4 lanes). \n\n![](img/v2v-road-topology.png)\n\nThe mobility trace is contained inside the file `automotive/example/sumo_files_v2v_map/cars.rou.xml`.\n\nThe SUMO map also embeds some re-routers allowing the vehicles to continuously travel on the available road segments.\n\n![](img/v2v-logic.png)\n\n**List of the most important options:**\n* `--realtime                   [bool] decide to run the simulation using the realtime scheduler or not`\n* `--sim-time                   [double] simulation time`\n* `--sumo-gui                   [bool] decide to show sumo-gui or not`\n* `--sumo-updates               [double] frequency of SUMO updates`\n* `--csv-log:                   [string] prefix of the CSV log files where to save CAMs and DENMs disaggregated data and statistics`\n\n\n# Sample V2X emulator application\n\n*ms-van3t* also includes an example of an emulation application, which is able to send the CAMs and DENMs generated by the vehicles, (virtually) travelling on the SUMO map, over a real network, by relying on a physical interface.\n\nThe same application should also be able to receive CAMs and DENMs coming from the external world (i.e. from a certain physical interface of the device running ns-3).\n\nFor the time being, this sample application is relying on the same map and mobility traces of the V2V application and it sends both CAM messages and periodic DENM messages, as an example on how both kinds of messages can be emulated and sent to the external world.\n\nIn order to properly work, the emulator application should always run in real time, and the device on which ns-3 is run should be able to handle the specified number of vehicles without delays and without slowing down. \n\nAs it is communicating with the external world, it handles only ASN.1 standard-compliant messages.\n\nMore in details, this application emulates N vehicles, each with its own CA and DEN basic service, and make them send the CAM/DENM messages and receive the CAM/DENM messages through a physical interface (specified with the \"interface\" option), instead of using any ns-3 simulated model.\nThis should enable, in the future, hardware-in-the-loop testing and evaluation.\n\nYou can run it with:\n`./ns3 run \"v2x-emulator --interface=<interface name>\"`\n\nWhere `<interface name>` is the name of the physical interface, on your PC, where CAMs will be sent.\n\n**Please note that the interface, in order to work with ns-3, should be put in promiscuous mode.**\n\nYou can put an interface in promiscuous mode with:\n`sudo ip link set <interface name> promisc on`\n\nThe promiscuous mode can then be disabled with:\n`sudo ip link set <interface name> promisc off`\n\n`sudo` may be needed to use the underlying ns-3 *FdNetDevice*: if you get a \"permission denied\" error, try adding `--enable-sudo` when doing `./ns3 configure` and then running without `sudo` (ns3 will ask for your password if needed).  \n\nThe logic of the application is contained inside model/Applications/v2x-helper.c/.h\n\n**UDP mode** \n\nIn the default emulation mode, messages will be sent, through the specified interface, as broadcast packets encapsulated inside BTP and GeoNetworking.\n\nThe user can also specify, however, a _UDP mode_, enabling the transmission of messages to an external UDP server. In this case, the ETSI V2X messages (i.e. CAM, DENM) will be encapsulated inside BTP --> GeoNetworking --> UDP --> IPv4, and sent to a host with a specified IPv4 and port.\n\n*Any host is fine, but the following limitations apply:*\n\n- The remote UDP server must be able to reply to the ARP requests sent by the vehicles, which will use their own source IP address and MAC and **not** the ones of the physical interface\n- No loopback operations are possible so far, due to the limitation mentioned before\n- The network at which the physical interface is connected shall be able to support the communication using spoofed MAC and IP addresses (otherwise, the ARP requests sent by ns-3 may not receive any reply). In general, we verified that any Ethernet link between ns-3 and the remote host receiving the UDP packets should be fine.\n\n**Screenshots**\n\nThe following screenshot shows a Wireshark capture of the messages sent by the emulator application, when operating in normal mode and selecting the `ens33` interface (e.g. `./ns3 run \"v2x-emulator --interface=ens33\"`)\n\n![](img/v2x-emulator-normal-mode.png)\n\n\nThe following screenshot shows a Wireshark capture of the messages sent by the emulator application, when operating in UDP mode, targeting a UDP server at 192.168.1.124/24, port 20000, and transmitting over the `ens33` interface (e.g. `./ns3 run \"v2x-emulator --udp=192.168.1.124:20000 --interface=ens33 netmask=255.255.255.0 gateway=192.168.1.1\"`)\n\n![](img/v2x-emulator-udp-mode.png)\n\n\n**List of the most important options:**\n* `--sim-time                   [double] total emulation/simulation time`\n* `--sumo-gui                   [bool] decide to show sumo-gui or not`\n* `--sumo-updates               [double] frequency of SUMO updates`\n* `--send-cam                   [bool] enable vehicles to send CAMs`\n* `--send-denm                  [bool] enable vehicles to send DENMs`\n* `--interface                  [string] Name of the physical interface to send(/receive) V2X messages to(/from)`\n* `--udp                \t\t   [string] To enable UDP mode and specify UDP port and IP address where the V2X messages are redirected (format: <IP>:<port>)`\n* `--gateway                    [string] To specify the gateway at which the UDP/IP packets will be sent`\n* `--subnet                     [string] To specify the subnet which will  be used to assign the IP addresses of emulated nodes (the .1 address is automatically excluded)`\n*  `--netmask                     [string] To specify the netmask of the network`\n\n# ms-van3t web-based vehicle visualizer\n\n**Requirement:** if you want to use this module, Node.js should be installed (on Ubuntu/Debian you can install it with `sudo apt install nodejs`).\n\n*ms-van3t* also comes with a web-based vehicle visualizer, able to display the vehicles travelling\nduring the simulation on a map, rendered directly inside the user's browser.\n\nIt can be particularly useful when working with GPS Traces (see the `gps-tc` module), which are not\ncoupled with a GUI (as opposed to SUMO).\n\nIf you want to fully exploit its potentiality, you need a Mapbox token, as the visualizer\nrelies on Mapbox to draw the street, hybrid and satellite map layers.\n\n**Once you get it, the mapbox token shall be copied inside the file `mapbox_token` in `src/vehicle-visualizer/js`**\n\nYou can find more information on Mapbox [here](https://www.mapbox.com/). They currently have quite good free tier options (allowing, at least in March 2021, up to 200000 free tile requests/month),\nwhich should be enough to use the ms-van3t vehicle visualizer without the need of paying anything. Please check them before signing up to Mapbox\nand getting a token to be used here. In general, we found out that a normal simulation, in which some sporadic zoom in/zoom out and\nthree layer changes are performed, may require around 150/200 tile requests (we advise you to check often the tile request count on the Mapbox website, when you use your token).\n\nIn general, you should disable the vehicle visualizer when doing long batches of simulations.\n\nIf you do not own a Mapbox token (i.e. the `mapbox_token` file is empty), the visualizer will work in any case, with the following limitations:\n- You **must** make an **occasional** use of the visualizer (i.e. **no** heavy usage allowed, **no** derivative apps can be developed\n  starting from the visualizer). Not making an occasional usage will conflict with the [Tile Usage Policy](https://operations.osmfoundation.org/policies/tiles/) of\n  OpenStreetMap, which is not considered acceptable. So, you **must disable** the vehicle-visualizer\n  when doing batches of simulations to gather some results. **You are responsible for this!**\n- Only one map layer (standard streets view from OpenStreetMap) will be available for use  \n\nIn order to use the visualizer in your application, you need to add, in the main function (i.e. `int main()`),\nthe following code, which creates a new `vehicleVisualizer` object:\n\n    vehicleVisualizer vehicleVisObj;\n    Ptr<vehicleVisualizer> vehicleVis = &vehicleVisObj;\n    vehicleVis->startServer();\n    vehicleVis->connectToServer ();\n\nDo **not** create a new `vehicleVisualizer` object with `CreateObject` or `new`, unless you plan to manually\ncall `delete` on it, as we rely on the object destructor in order to send a terminate message to the web visualizer\nserver and gracefully terminate it.\n\nAfter creating a new vehicle visualizer object, you need to pass its pointer to the module which manages the vehicle's mobility.\nIf you are using SUMO and TraCI, you can call:\n\n    sumoClient->SetAttribute (\"VehicleVisualizer\", PointerValue (vehicleVis));\n\nWhere sumoClient is a pointer to TraCI client object (`Ptr<TraciClient>`) you previously created.\n\nIf you are using, instead, GPS-tc, you can call:\n\n    GPSTCHelper.setVehicleVisualizer(vehicleVis);\n\nWhere `GPSTCHelper` is a `GPSTraceClientHelper` object. In this case, `setVehicleVisualizer()`\nmust be called **before** `createTraceClientsFromCSV()`, otherwise the vehicle visualizer\nreference will not be passed to the GPS Trace Client objects managing the mobility of the\nvehicles and no moving vehicles will appear on the map.\n\nThe vehicles displayed by the visualizer can also be inserted and updated from user applications (e.g. in an emulator application, you\ncan use the CAMs received from the external world to add real vehicles to the map, together\nwith the simulated ones).\n\nIn order to add and update a moving object from an application, the latter should have, first of all,\na reference to the visualizer object (i.e. `Ptr<vehicleVisualizer>`). Then, it will be able to use\n`<name of pointer to the vehicleVisualizer>->sendObjectUpdate()` to add and update any object in the map.\nIn this case it is important to specify, as first argument of the `sendObjectUpdate()` function, an object ID which must be different from the IDs of the simulated\nvehicles.\n\nYou can also refer to the examples inside `src/automotive/examples`, which all (but the V2X emulator) include the possibility\nof using the web-based vehicle visualizer via the `--vehicle-visualizer=true` option.\n\nThe visualizer, once a simulation has been started, can be opened inside any browser, as long as the simulation is running, at `localhost:8080` (if a different HTTP port is not specified with the `setHTTPPort()` method of the `vehicleVisualizer` object).\n\n## Acknowledgements\n\nTo acknowledge us in your publication(s) please refer to the following publication:\n\n```tex\n@article{ms-van3t-journal-2024,\n\ttitle = {ms-van3t: An integrated multi-stack framework for virtual validation of V2X communication and services},\n\tjournal = {Computer Communications},\n\tvolume = {217},\n\tpages = {70-86},\n\tyear = {2024},\n\tissn = {0140-3664},\n\tdoi = {https://doi.org/10.1016/j.comcom.2024.01.022},\n\turl = {https://www.sciencedirect.com/science/article/pii/S0140366424000227},\n\tauthor = {F. Raviglione and C.M. Risma Carletti and M. Malinverno and C. Casetti and C.F. Chiasserini},\n\tkeywords = {Connected vehicles, V2X, Virtual validation, Hardware in the loop},\n}\n```\n\nOur manuscript is open access and it is available [here](https://doi.org/10.1016/j.comcom.2024.01.022).\n",
  "examples": []
}